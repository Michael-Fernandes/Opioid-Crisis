{"ast":null,"code":"import _classCallCheck from \"/Users/fernb0t/Code/react/michael-fernandes.github.io/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fernb0t/Code/react/michael-fernandes.github.io/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/fernb0t/Code/react/michael-fernandes.github.io/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/fernb0t/Code/react/michael-fernandes.github.io/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/fernb0t/Code/react/michael-fernandes.github.io/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/fernb0t/Code/react/michael-fernandes.github.io/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as ReactFauxDOM from 'react-faux-dom';\nimport data from \"../Resources/data.json\";\nimport colors from \"../Resources/colors.json\";\n\nvar Chart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Chart, _Component);\n\n  function Chart(props) {\n    var _this;\n\n    _classCallCheck(this, Chart);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Chart).call(this, props));\n    _this.makeD3 = _this.makeD3.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getActive = _this.getActive.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.gettoolTip = _this.gettoolTip.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    window.c = colors;\n    return _this;\n  }\n\n  _createClass(Chart, [{\n    key: \"getActive\",\n    value: function getActive() {\n      var countries = this.props.countries;\n      var active = countries.filter(function (el) {\n        return el.active === true;\n      }); // I have no idea but this call drops data.....\n\n      return active;\n    }\n  }, {\n    key: \"gettoolTip\",\n    value: function gettoolTip(d) {\n      return \"Value:\" + d.val + \"<br/>Upper:\" + d.upper + \"<br />Lower:\" + d.lower;\n    }\n  }, {\n    key: \"makeD3\",\n    value: function makeD3() {\n      var fauxDiv = ReactFauxDOM.createElement('div'); //  TODO: dynamically add new data\n\n      var activeNames = this.getActive();\n      var activeData = getDataActive(activeNames); // set the dimensions and margins of the graph\n\n      var margin = {\n        top: 20,\n        right: 20,\n        bottom: 30,\n        left: 50\n      },\n          width = 960 - margin.left - margin.right,\n          height = 500 - margin.top - margin.bottom; // parse the date / time\n      // set the ranges\n\n      var x = d3.scaleTime().range([0, width]);\n      var y = d3.scaleLinear().range([height, 0]);\n      var svg = d3.select(fauxDiv).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n      var parseYear = d3.timeParse(\"%Y\"); // Scale the range of the data\n\n      var sample = data['Canada'][\"Both\"];\n      x.domain(d3.extent(sample, function (d) {\n        return parseYear(d.year);\n      }));\n      y.domain([0, d3.max(getDomain(activeData), function (d) {\n        return d.val;\n      })]); // define the line\n\n      var valueline = function valueline(val) {\n        return d3.line().x(function (d) {\n          return x(new Date(d.year, 1, 1));\n        }).y(function (d) {\n          return y(d[val]);\n        });\n      };\n\n      var div = d3.select(\"#root\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = activeData[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var countryData = _step.value;\n          var linePlot = svg.append(\"g\");\n          var cdBoth = countryData.data[\"Both\"].sort(function (a, b) {\n            return a.year - b.year;\n          });\n          linePlot.append(\"path\").datum(cdBoth).attr(\"class\", \"line\").attr(\"d\", valueline(\"val\")).attr(\"stroke-width\", \"2.5px\").attr(\"stroke\", colors[countryData.name]).attr('color', colors[countryData.name]).attr(\"fill\", 'none'); // 12. Appends a circle for each datapoint \n\n          linePlot.selectAll(\".linePlotPoint\").data(cdBoth).enter().append(\"circle\") // Uses the enter().append() method\n          .attr(\"class\", \"linePlotPoint\") // Assign a class for styling\n          .attr(\"cx\", function (d, i) {\n            return x(new Date(d.year, 1, 1));\n          }).attr(\"cy\", function (d) {\n            return y(d.val);\n          }).attr(\"r\", 4).attr(\"stroke\", colors[countryData.name]).attr(\"fill\", colors[countryData.name]).on(\"mouseover\", function (d) {\n            div.transition().duration(200).style(\"opacity\", 1);\n            div.html(this.gettoolTip()).style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n          }).on(\"mouseout\", function (d) {\n            div.transition().duration(500).style(\"opacity\", 0);\n          });\n          ;\n        } // Add the X Axis\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x).ticks(5).tickSizeOuter(0)); // Add the Y Axis\n\n      svg.append(\"g\").call(d3.axisLeft(y).ticks(6).tickSizeOuter(0));\n      return fauxDiv;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var FauxSvg = this.makeD3();\n      return FauxSvg.toReact();\n    }\n  }]);\n\n  return Chart;\n}(Component); // data transformatiuon helper functions\n\n\nvar getDataFor = function getDataFor(country) {\n  return {\n    name: country.name,\n    data: data[[country.name]]\n  };\n};\n\nvar getDomain = function getDomain(countries) {\n  var d = [{\n    val: 3.0\n  }];\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = countries[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var c = _step2.value;\n      d = d.concat(c.data['Both']);\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return d;\n};\n\nvar getDataActive = function getDataActive(countries) {\n  var activeData = [];\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = countries[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var c = _step3.value;\n      activeData.push(getDataFor(c));\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return activeData;\n};\n\nexport default ReactFauxDOM.withFauxDOM(Chart);","map":{"version":3,"sources":["/Users/fernb0t/Code/react/michael-fernandes.github.io/src/Components/Chart.js"],"names":["Component","d3","ReactFauxDOM","data","colors","Chart","props","makeD3","bind","getActive","gettoolTip","window","c","countries","active","filter","el","d","val","upper","lower","fauxDiv","createElement","activeNames","activeData","getDataActive","margin","top","right","bottom","left","width","height","x","scaleTime","range","y","scaleLinear","svg","select","append","attr","parseYear","timeParse","sample","domain","extent","year","max","getDomain","valueline","line","Date","div","style","countryData","linePlot","cdBoth","sort","a","b","datum","name","selectAll","enter","i","on","transition","duration","html","event","pageX","pageY","call","axisBottom","ticks","tickSizeOuter","axisLeft","FauxSvg","toReact","getDataFor","country","concat","push","withFauxDOM"],"mappings":"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","sourcesContent":["import { Component } from 'react'\nimport * as d3 from 'd3'\nimport * as ReactFauxDOM from 'react-faux-dom'\nimport data from \"../Resources/data.json\"\nimport colors from \"../Resources/colors.json\"\n\nclass Chart extends Component {\n    constructor(props){\n        super(props);\n\n        this.makeD3 = this.makeD3.bind(this);\n        this.getActive = this.getActive.bind(this)\n        this.gettoolTip = this.gettoolTip.bind(this);\n        window.c = colors;\n    }\n\n    getActive(){\n        let countries = this.props.countries;\n        let active = countries.filter(el => el.active === true); // I have no idea but this call drops data.....\n        return active;\n    }\n\n    gettoolTip(d){\n        return \"Value:\" + d.val + \"<br/>Upper:\" + d.upper + \"<br />Lower:\" + d.lower;\n    }\n\n    makeD3(){\n        let fauxDiv = ReactFauxDOM.createElement('div');  \n        \n        //  TODO: dynamically add new data\n        let activeNames = this.getActive();\n        let activeData = getDataActive(activeNames)\n        \n        // set the dimensions and margins of the graph\n        var margin = {top: 20, right: 20, bottom: 30, left: 50},\n        width = 960 - margin.left - margin.right,\n        height = 500 - margin.top - margin.bottom;\n\n        // parse the date / time\n        // set the ranges\n        var x = d3.scaleTime().range([0, width]);\n        var y = d3.scaleLinear().range([height, 0]);\n\n        \n\n        let svg = d3.select(fauxDiv).append(\"svg\")\n                    .attr(\"width\", width + margin.left + margin.right)\n                    .attr(\"height\", height + margin.top + margin.bottom)\n                    .append(\"g\")\n                    .attr(\"transform\",\n                        \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        let parseYear = d3.timeParse(\"%Y\");\n        // Scale the range of the data\n        let sample = data['Canada'][\"Both\"];\n        x.domain(d3.extent(sample, function(d) { return parseYear(d.year) }));\n        y.domain([0, d3.max(getDomain(activeData), function(d) { return d.val; })]);\n\n        // define the line\n        let valueline = (val) =>{ \n            return d3.line()\n                    .x(function(d) { return x(new Date(d.year, 1, 1)); })\n                    .y(function(d) { return y(d[val]); }); \n        }\n\n        let div = d3.select(\"#root\").append(\"div\")\n            .attr(\"class\", \"tooltip\")\n            .style(\"opacity\", 0);\n            \n        for( let countryData of activeData ){\n            let linePlot = svg.append(\"g\")\n            let cdBoth = countryData.data[\"Both\"].sort(function(a, b){return a.year - b.year}) ;\n            \n            linePlot.append(\"path\")\n                .datum(cdBoth)\n                .attr(\"class\", \"line\")\n                .attr(\"d\",valueline(\"val\"))\n                .attr(\"stroke-width\", \"2.5px\")\n                .attr(\"stroke\", colors[countryData.name])\n                .attr('color', colors[countryData.name])\n                .attr(\"fill\", 'none')\n            \n            // 12. Appends a circle for each datapoint \n            linePlot.selectAll(\".linePlotPoint\").data(cdBoth)\n                .enter().append(\"circle\") // Uses the enter().append() method\n                .attr(\"class\", \"linePlotPoint\") // Assign a class for styling\n                .attr(\"cx\", function(d, i) { return x(new Date(d.year, 1, 1)) })\n                .attr(\"cy\", function(d) { return y(d.val) })\n                .attr(\"r\", 4)\n                .attr(\"stroke\", colors[countryData.name])\n                .attr(\"fill\", colors[countryData.name])\n                .on(\"mouseover\", function(d) {\n                    div.transition()\n                      .duration(200)\n                      .style(\"opacity\", 1);\n                    div.html(this.gettoolTip())\n                      .style(\"left\", (d3.event.pageX) + \"px\")\n                      .style(\"top\", (d3.event.pageY - 28) + \"px\"); })\n                .on(\"mouseout\", function(d) {\n                        div.transition()\n                          .duration(500)\n                          .style(\"opacity\", 0);\n                        });;        \n        }\n\n        // Add the X Axis\n        svg.append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call( d3.axisBottom(x).ticks(5).tickSizeOuter(0) );\n\n        // Add the Y Axis\n        svg.append(\"g\")\n            .call( d3.axisLeft(y).ticks(6).tickSizeOuter(0) );\n\n        return fauxDiv;\n    }\n\n    render() {\n        let FauxSvg = this.makeD3();\n\n        return (\n            FauxSvg.toReact()\n        );\n    }\n}\n\n\n// data transformatiuon helper functions\nconst getDataFor = (country) =>{\n    return { \n        name:country.name, \n        data:data[[country.name]]\n    }\n}\n\nconst getDomain = (countries) =>{\n    let d = [{val:3.0}]\n    for(let c of countries){\n        d = d.concat(c.data['Both']);\n    }\n    return d\n}\n\nconst getDataActive = (countries) =>{\n    let activeData = []\n    for(let c of countries){\n        activeData.push(getDataFor(c));\n    }\n    return activeData;\n}\n\nexport default ReactFauxDOM.withFauxDOM(Chart);\n"]},"metadata":{},"sourceType":"module"}